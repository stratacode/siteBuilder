<html abstract="true">
   <%! object siteMgr extends SiteManagerView {} %>

   <head exec="server">
      <div id="libScripts" bodyOnly="true">
      </div>
      <link id="docStyle" rel="stylesheet" href="/managerStyle.css" type="text/css"/>
   </head>

   <body>
      <div id="mgrFrame" visible=":= currentUserView.loginStatus == LoginStatus.LoggedIn">
         <select id="siteSelect" optionDataSource=":= siteMgr.siteSelectList"
                 changeEvent="=: siteMgr.changeSiteWithIndex(selectedIndex)"
                 disabled=":= siteMgr.showCreateView"
                 selectedIndex=":= siteMgr.siteIndex"/>
         <span id="createButtons">
            <input id="siteCreate" type="button" value="Create site" visible=":= !siteMgr.showCreateView"
                   clickEvent="=: siteMgr.startAddSite()" class="rightButton"/>
         </span>
         <span id="mgrNav" visible=":= siteMgr.validSite">
            <a id="userLink" href="/manage/user">User</a>
            <a id="pageLink" href="/manage/page">Page</a>
            <a id="mediaLink" href="/manage/media">Media</a>
         </span>
         <div class="formError"><%= siteMgr.errorMessage %></div>

         <div id="createSiteView" class="formContainer" visible=":= siteMgr.showCreateView">
            <div class="formTitle">Add site</div>
            <div class="formField">
               <label for="siteTypeSelect">Choose site type</label>
               <select optionDataSource=":= siteMgr.newSiteTypes" changeEvent="=: siteMgr.updateNewSiteType(selectedValue)"/>
            </div>
            <div class="formField">
               <label for="siteNameField">Site name</label>
               <input type="text" id="siteNameField" placeholder="display name"
                      value=":= siteMgr.newSiteName" changeEvent="=: siteMgr.updateNewSiteName(value)"/>
            </div>
            <div class="formField">
               <label for="sitePathNameField">Site path name</label>
               <input type="text" id="sitePathNameField" placeholder="browser location name (no spaces)"
                      value=":= siteMgr.newSitePathName" changeEvent="=: siteMgr.updateNewPathName(value)"/>
            </div>
            <div class="formError"><%= siteMgr.newSiteError %></div>
            <div class="formField confirmButtons">
               <input type="button" value="Save" clickEvent="=: siteMgr.completeAddSite()"/>
               <input type="button" value="Cancel" clickEvent="=: siteMgr.cancelAddSite()" class="rightButton"/>
            </div>
         </div>

         <div id="alt">
            <div id="loginView" visible=":= currentUserView.loginStatus == LoginStatus.NotLoggedIn">
               <div class="formTitle">Login to manage sites</div>
               <div class="formField">
                  <label for="userNameField">User name</label>
                  <input type="text" placeholder="user name" value=":=: currentUserView.userName"/>
               </div>
               <div class="formField">
                  <label for="passwordField">Password</label>
                  <input type="password" placeholder="password" value=":=: currentUserView.password"/>
               </div>
               <input type="submit" value="Log in" clickEvent="=: currentUserView.login()" class="confirmButtons"/>
               <input type="submit" value="Register" clickEvent='=: Window.window.location.href = "/Register.html"' class="rightButtons"/>
            </div>
            <div class="formError"><%= currentUserView.userViewError %></div>
         </div>
      </div>
   </body>
</html>
